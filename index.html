<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presales Compass</title>
    <!-- Prevent 404 for favicon -->
    <link rel="icon" href="data:,">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- DualFit Premium SaaS Design System (Monochrome / Vanilla CSS) --- */
        :root {
          --primary: #111827; /* Gray 900 */
          --primary-hover: #000000;
          --primary-light: #F3F4F6; /* Gray 100 */
          
          --text-main: #111827;
          --text-secondary: #4B5563;
          --text-muted: #9CA3AF;
          
          --bg-body: #F9FAFB;
          --bg-card: #FFFFFF;
          --bg-sidebar: #FFFFFF;
          
          --border: #E5E7EB;
          
          --radius-lg: 16px;
          --radius-md: 12px;
          --radius-sm: 8px;
          
          --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Global Reset */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
          margin: 0;
          padding: 0;
          font-family: 'Inter', -apple-system, sans-serif;
          background: var(--bg-body);
          color: var(--text-main);
          -webkit-font-smoothing: antialiased;
          min-height: 100vh;
        }

        /* Layout Container - Centering Logic */
        .app-container {
            display: flex;
            width: 100%;
            max-width: 1120px; /* ì „ì²´ ë„ˆë¹„ ì œí•œ ë³€ê²½ */
            margin: 40px auto; /* ì¢Œìš° autoë¡œ ì¤‘ì•™ ì •ë ¬ */
            padding: 0 24px; /* ì‘ì€ í™”ë©´ìš© ë‚´ë¶€ ì—¬ë°± */
            gap: 32px; /* ì‚¬ì´ë“œë°”ì™€ ì½˜í…ì¸  ì‚¬ì´ ê°„ê²© */
            align-items: flex-start; /* ìƒë‹¨ ì •ë ¬ */
        }

        /* Sidebar (Box Style) */
        .sidebar {
            width: 260px;
            flex-shrink: 0;
            background: var(--bg-sidebar);
            border: 1px solid var(--border); /* ë°•ìŠ¤ í…Œë‘ë¦¬ */
            border-radius: var(--radius-lg); /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            box-shadow: var(--shadow-sm); /* ë°•ìŠ¤ ê·¸ë¦¼ì */
            display: flex;
            flex-direction: column;
            position: sticky; /* ìŠ¤í¬ë¡¤ ì‹œ ë”°ë¼ì˜´ */
            top: 40px;
            height: fit-content;
            /* min-height removed to fit content */
            z-index: 50;
        }

        .sidebar-header {
            padding: 24px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border);
        }

        .logo-box {
            width: 36px;
            height: 36px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .app-title {
            font-weight: 700;
            font-size: 16px;
            letter-spacing: -0.02em;
        }

        .sidebar-menu {
            padding: 20px 12px;
            flex: 1;
        }

        .menu-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            padding: 0 12px;
            margin-bottom: 12px;
            text-transform: uppercase;
        }

        .menu-item {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 10px 12px;
            margin-bottom: 4px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            gap: 12px;
            transition: all 0.2s;
            position: relative;
            text-align: left;
        }

        .menu-item:hover {
            background: var(--bg-body);
            color: var(--text-main);
        }

        .menu-item.active {
            background: var(--primary-light);
            color: var(--primary);
            font-weight: 600;
        }
        
        .active-indicator {
            position: absolute;
            right: 12px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary);
            display: none;
        }

        .menu-item.active .active-indicator {
            display: block;
        }

        /* Sidebar Footer Removed */

        .avatar-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #E5E7EB;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        /* Main Area */
        .main {
            flex: 1;
            width: 100%; 
            min-width: 0; /* Flex overflow ë°©ì§€ */
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 8px 0;
            letter-spacing: -0.03em;
        }

        .page-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Cards */
        .card-premium {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            margin-bottom: 24px;
            overflow: hidden;
            transition: box-shadow 0.3s ease;
        }
        
        .card-premium:hover {
            box-shadow: var(--shadow-md);
        }

        /* Suitability Specific */
        .score-overview-card {
            display: flex;
            padding: 32px;
            align-items: center;
            gap: 40px;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 8px solid var(--primary-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transform: rotate(45deg);
            background: white;
            position: relative;
        }
        
        .score-circle::after {
            content: '';
            position: absolute;
            top: -8px; left: -8px; right: -8px; bottom: -8px;
            border-radius: 50%;
            border: 8px solid transparent;
            border-top-color: var(--primary);
            border-left-color: var(--primary);
            pointer-events: none;
        }

        .score-circle > * { transform: rotate(-45deg); }

        .score-number { font-size: 32px; font-weight: 800; line-height: 1; }
        .score-unit { font-size: 12px; color: var(--text-muted); font-weight: 600; margin-top: 4px; }

        .score-details { flex: 1; }
        .progress-bar-track {
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }

        .checklist-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            gap: 24px;
        }
        
        .category-title {
            background: #F9FAFB;
            padding: 16px 24px;
            margin: 0;
            font-size: 16px;
            border-bottom: 1px solid var(--border);
        }

        /* Slider */
        .slider-container { width: 220px; flex-shrink: 0; }
        .slider-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .slider-num { 
            font-size: 12px; color: #D1D5DB; cursor: pointer; width: 20px; text-align: center; 
            font-weight: 600; transition: all 0.2s; 
        }
        .slider-num.active { color: var(--primary); transform: scale(1.2); }
        
        .slider-track-wrapper { position: relative; height: 24px; display: flex; align-items: center; }
        .track-bg { position: absolute; left: 0; right: 0; height: 4px; background: #E5E7EB; border-radius: 2px; }
        .track-fill { 
            position: absolute; left: 0; height: 4px; background: var(--primary); border-radius: 2px; 
            transition: width 0.1s; pointer-events: none;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%; height: 24px; background: transparent; 
            position: relative; z-index: 2; margin: 0; padding: 0; cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px; width: 20px;
            border-radius: 50%; background: #fff;
            border: 2px solid #D1D5DB;
            margin-top: -8px; /* Correctly center thumb on track (4px height) */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        input[type="range"]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; cursor: pointer; background: transparent; border: none;
        }
        input[type="range"].selected::-webkit-slider-thumb {
            background: var(--primary); border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(17, 24, 39, 0.2);
        }

        /* Table & Competency */
        .table-responsive { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th { 
            background: #F9FAFB; text-align: left; padding: 12px 16px; 
            border-bottom: 1px solid var(--border); font-size: 12px; 
            text-transform: uppercase; color: var(--text-secondary);
        }
        td { padding: 16px; border-bottom: 1px solid var(--border); vertical-align: middle; }
        
        .domain-cell { 
            background: white; 
            border-right: 1px solid var(--border); 
            vertical-align: top; 
            text-align: center; /* ì¤‘ì•™ ì •ë ¬ ì¶”ê°€ */
        }
        .badge-weight { 
            font-size: 10px; background: #F3F4F6; padding: 2px 6px; 
            border-radius: 4px; color: #4B5563; font-weight: 600; 
        }
        
        .gap-badge { padding: 4px 10px; border-radius: 99px; font-size: 12px; font-weight: 700; }
        .gap-high { background: var(--primary); color: white; }
        .gap-low { background: #F3F4F6; color: #9CA3AF; }

        /* Priority Cards */
        .priority-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 24px; }
        .priority-card { padding: 24px; position: relative; border-top: 4px solid var(--primary); transition: transform 0.2s; }
        .priority-card:hover { transform: translateY(-2px); }
        .rank-badge {
            position: absolute; top: 16px; right: 16px; width: 32px; height: 32px;
            background: var(--primary-light); color: var(--primary);
            border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800;
        }

        /* Utilities */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .legend-card { padding: 16px 24px; background: #F8FAFC; display: flex; gap: 20px; flex-wrap: wrap; border:1px solid #E2E8F0; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary); }
        .legend-badge { 
            width: 24px; height: 24px; border-radius: 6px; background: white; 
            border: 1px solid #E2E8F0; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; color: var(--text-main);
        }

        /* Actions */
        .btn-reset {
            background: white;
            border: 1px solid var(--border);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0;
            margin-left: 16px;
        }
        .btn-reset:hover {
            background: #F3F4F6;
            color: var(--primary);
            border-color: #D1D5DB;
        }
    </style>
</head>
<body>
    <div id="app" class="app-container">
        <!-- Sidebar (Box Style) -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo-box">
                    <!-- Compass Icon SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg>
                </div>
                <span class="app-title">Presales Compass</span>
            </div>
            
            <div class="sidebar-menu">
                <div class="menu-label">MENU</div>
                <button id="menu-suitability" class="menu-item active" onclick="app.navigate('suitability')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    ì—…ë¬´ ì í•©ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸
                    <div class="active-indicator"></div>
                </button>
                <button id="menu-competency" class="menu-item" onclick="app.navigate('competency')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                    ì—­ëŸ‰ í‰ê°€ ë° í•™ìŠµ
                    <div class="active-indicator"></div>
                </button>
            </div>
            <!-- Sidebar Footer Removed -->
        </nav>

        <!-- Main Content -->
        <main class="main">
            <!-- View: Suitability -->
            <div id="view-suitability">
                <div class="page-header">
                    <div>
                        <h1>í”„ë¦¬ì„¸ì¼ì¦ˆ ì—…ë¬´ ì í•©ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
                        <p class="page-subtitle">ë³¸ì¸ì˜ ì„±í–¥ê³¼ ì—­ëŸ‰ì´ í”„ë¦¬ì„¸ì¼ì¦ˆ ì§ë¬´ì— ì–¼ë§ˆë‚˜ ë¶€í•©í•˜ëŠ”ì§€ ì§„ë‹¨í•´ë³´ì„¸ìš”.</p>
                    </div>
                    <button class="btn-reset" onclick="app.resetSuitability()">í‰ê°€ ì´ˆê¸°í™”</button>
                </div>
                
                <!-- Legend for Suitability -->
                <div class="card-premium legend-card" style="margin-bottom:24px;">
                    <div style="font-weight:700; font-size:12px; color:var(--text-muted); width:100%; text-transform:uppercase;">í‰ê°€ ê¸°ì¤€ ê°€ì´ë“œ (1~5ì )</div>
                    <div class="legend-item"><span class="legend-badge">1</span> ë§¤ìš° ê·¸ë ‡ì§€ ì•Šë‹¤</div>
                    <div class="legend-item"><span class="legend-badge">2</span> ê·¸ë ‡ì§€ ì•Šë‹¤</div>
                    <div class="legend-item"><span class="legend-badge" style="background:#E5E7EB; border:none;">3</span> ë³´í†µ</div>
                    <div class="legend-item"><span class="legend-badge" style="background:#9CA3AF; color:white; border:none;">4</span> ê·¸ë ‡ë‹¤</div>
                    <div class="legend-item"><span class="legend-badge" style="background:var(--primary); color:white; border:none;">5</span> ë§¤ìš° ê·¸ë ‡ë‹¤</div>
                </div>

                <!-- Score Overview -->
                <div class="card-premium score-overview-card">
                    <div class="score-circle">
                        <span id="suitability-total-score" class="score-number">0</span>
                        <span class="score-unit">ì </span>
                    </div>
                    <div class="score-details">
                        <div style="font-size:14px; font-weight:600; color:var(--text-secondary); margin-bottom:12px; text-transform:uppercase;">í˜„ì¬ ì í•©ë„ ì ìˆ˜</div>
                        <div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:8px;">
                            <span id="suitability-progress-text">ì§„í–‰ë¥  (0/11)</span>
                            <span id="suitability-progress-percent">0%</span>
                        </div>
                        <div class="progress-bar-track">
                            <div id="suitability-progress-bar" class="progress-bar-fill"></div>
                        </div>
                    </div>
                </div>

                <!-- Checklist Container -->
                <div id="checklist-container">
                    <!-- Javascript will populate this -->
                </div>

                <!-- Result Message -->
                <div id="suitability-result" class="card-premium hidden" style="background:#F3F4F6; padding:24px;">
                    <h3 style="margin:0 0 8px 0; font-size:18px;">ì§„ë‹¨ ì™„ë£Œ ğŸ‰</h3>
                    <p id="suitability-result-text" style="margin:0; color:var(--text-secondary); line-height:1.5;"></p>
                </div>
            </div>

            <!-- View: Competency -->
            <div id="view-competency" class="hidden">
                <div class="page-header">
                    <div>
                        <h1>ì—­ëŸ‰ í‰ê°€ ë° í•™ìŠµ ìš°ì„ ìˆœìœ„</h1>
                        <p class="page-subtitle">í˜„ì¬ ì—­ëŸ‰ì„ ì§„ë‹¨í•˜ê³  GAP ë¶„ì„ì„ í†µí•´ í•™ìŠµ ìš°ì„ ìˆœìœ„ë¥¼ ë„ì¶œí•©ë‹ˆë‹¤.</p>
                    </div>
                    <button class="btn-reset" onclick="app.resetCompetency()">í‰ê°€ ì´ˆê¸°í™”</button>
                </div>

                <!-- Legend for Competency -->
                <div class="card-premium legend-card" style="margin-bottom:24px;">
                    <div style="font-weight:700; font-size:12px; color:var(--text-muted); width:100%; text-transform:uppercase;">í‰ê°€ ê¸°ì¤€ ê°€ì´ë“œ (1~5ì )</div>
                    <div class="legend-item"><span class="legend-badge">1</span> ê¸°ìˆ  ì—†ìŒ</div>
                    <div class="legend-item"><span class="legend-badge">2</span> ì§€ì‹ ìˆìŒ</div>
                    <div class="legend-item"><span class="legend-badge" style="background:#E5E7EB; border:none;">3</span> ìˆ™ë ¨</div>
                    <div class="legend-item"><span class="legend-badge" style="background:#9CA3AF; color:white; border:none;">4</span> ê³ ê¸‰</div>
                    <div class="legend-item"><span class="legend-badge" style="background:var(--primary); color:white; border:none;">5</span> ì „ë¬¸ê°€</div>
                </div>

                <!-- Table -->
                <div class="card-premium">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th class="text-center" style="width:14%">ì˜ì—­ (ê°€ì¤‘ì¹˜)</th>
                                    <th class="text-center" style="width:33%">ì—­ëŸ‰ ìƒì„¸</th>
                                    <th class="text-center" style="width:8%">ì¤‘ìš”ë„</th>
                                    <th class="text-center" style="width:35%">ë‚´ ì—­ëŸ‰ (1~5)</th>
                                    <th class="text-center" style="width:10%">GAP</th>
                                </tr>
                            </thead>
                            <tbody id="competency-table-body">
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Top 3 Priorities -->
                <div id="priority-section" class="hidden">
                    <div style="display:flex; align-items:center; gap:12px; margin-top:48px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                        <h3 style="font-size:20px; margin:0;">í•™ìŠµ ìš°ì„ ìˆœìœ„ TOP 3</h3>
                    </div>
                    <p style="color:var(--text-secondary); margin-bottom:24px;">ë‹¤ìŒ ì—­ëŸ‰ì„ ë¨¼ì € ê°œë°œí•˜ë©´ ê°€ì¥ í° ì„±ì¥ì„ ì´ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <div id="priority-list" class="priority-grid">
                        <!-- JS Populated -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Application Logic (Inlined) -->
    <script>
    /**
     * Presales Compass - Pure Vanilla JS Implementation
     */

    // --- Data Definitions ---

    const SUITABILITY_DATA = [
        {
          id: "tech",
          title: "1. ê¸°ìˆ  ì—­ëŸ‰",
          items: [
            { id: "t1", text: "ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš°ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° í¥ë¯¸ë¥¼ ëŠë‚€ë‹¤." },
            { id: "t2", text: "ìµœì‹  ê¸°ìˆ  ë° ì—…ê³„ ë™í–¥ì„ ì§€ì†ì ìœ¼ë¡œ í•™ìŠµí•˜ê³  ìˆë‹¤." },
            { id: "t3", text: "RFP, ì œì•ˆì„œ, PoC ë³´ê³ ì„œ ë“±ì˜ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ìµìˆ™í•˜ë‹¤." },
          ]
        },
        {
          id: "biz",
          title: "2. ë¹„ì¦ˆë‹ˆìŠ¤ ë° ê³ ê° ëŒ€ì‘",
          items: [
            { id: "b1", text: "ê³ ê°ì´ ì›í•˜ëŠ” ê°€ì¹˜ë¥¼ ì´í•´í•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ì  ê´€ì ì—ì„œ ì†”ë£¨ì…˜ì„ ê³ ë¯¼í•  ìˆ˜ ìˆë‹¤." },
            { id: "b2", text: "ê¸°ì—…ì˜ ì„±ì¥ì„ ìœ„í•´ ì¢‹ì€ ì œí’ˆì„ ë§Œë“œëŠ” ê²ƒë§Œí¼ íŒë§¤ê°€ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤." },
            { id: "b3", text: "ê³ ê°ì´ ëª…í™•í•˜ê²Œ ì •ì˜í•˜ì§€ ì•Šì€ ìš”êµ¬ì‚¬í•­ì„ íŒŒì•…í•˜ê³ , ìµœì ì˜ ì†”ë£¨ì…˜ì„ ì œì•ˆí•  ìˆ˜ ìˆë‹¤." },
            { id: "b4", text: "ê³ ê°ê³¼ ì‹ ë¢°ë¥¼ êµ¬ì¶•í•˜ë©°, í˜‘ì—…ì„ ì›í™œí•˜ê²Œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤." },
          ]
        },
        {
          id: "comm",
          title: "3. ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë° í˜‘ì—…",
          items: [
            { id: "c1", text: "ê¸°ìˆ ì  ë‚´ìš©ì„ ê³ ê°ì´ ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤." },
            { id: "c2", text: "ì˜ì—…, ê°œë°œ, ì»¨ì„¤íŒ… ë“± ë‹¤ì–‘í•œ íŒ€ê³¼ í˜‘ì—…í•œ ê²½í—˜ì´ ìˆë‹¤." },
          ]
        },
        {
          id: "prob",
          title: "4. ë¬¸ì œ í•´ê²° ë° ë©€í‹°íƒœìŠ¤í‚¹",
          items: [
            { id: "p1", text: "ë³µì¡í•œ ë¬¸ì œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  í•´ê²°ì±…ì„ ì°¾ëŠ” ëŠ¥ë ¥ì´ ìˆë‹¤." },
            { id: "p2", text: "ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì íŠ¸ë‚˜ ê³ ê°ì„ ë™ì‹œì— ê´€ë¦¬í•˜ê³  ì§„í–‰í•  ìˆ˜ ìˆë‹¤." },
          ]
        }
    ];

    const COMPETENCY_DATA = [
        {
          id: "d1",
          name: "1. ê¸°ìˆ ì  ì§€ì‹",
          weight: 5,
          items: [
            { id: "c1_1", text: "ì œí’ˆ ë˜ëŠ” ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì „ë°˜ì ì¸ ì´í•´ë„", importance: 5 },
            { id: "c1_2", text: "ì œí’ˆ ë˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê¸°ëŠ¥ê³¼ íŠ¹ì§•ì— ëŒ€í•œ ì´í•´", importance: 5 },
            { id: "c1_3", text: "ê²½ìŸ ì œí’ˆê³¼ì˜ ë¹„êµ ë¶„ì„ì— ëŒ€í•œ ì´í•´", importance: 4 },
            { id: "c1_4", text: "ì œí’ˆ ë˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê°€ì¹˜ì™€ ì´ì ì— ëŒ€í•œ ì´í•´", importance: 5 },
          ]
        },
        {
          id: "d2",
          name: "2. ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ê¸°ìˆ ",
          weight: 5,
          items: [
            { id: "c2_1", text: "íš¨ê³¼ì ì¸ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ê¸°ìˆ ", importance: 5 },
            { id: "c2_2", text: "ëª…í™•í•˜ê³  êµ¬ì¡°í™”ëœ í”„ë ˆì  í…Œì´ì…˜ ê¸°ìˆ ", importance: 4 },
            { id: "c2_3", text: "ì²­ì¤‘ì„ ì´í•´í•˜ê³  ì´ì— ë§ëŠ” ì»¤ë®¤ë‹ˆì¼€ì´ì…˜", importance: 4 },
            { id: "c2_4", text: "ë¹„ê¸°ìˆ ì ì¸ ê³ ê° ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ëª…í•˜ëŠ” ëŠ¥ë ¥", importance: 3 },
          ]
        },
        {
          id: "d3",
          name: "3. ë¶„ì„ ë° ë¬¸ì œ í•´ê²° ëŠ¥ë ¥",
          weight: 4.5,
          items: [
            { id: "c3_1", text: "ê³ ê°ì˜ ìš”êµ¬ ì‚¬í•­ì„ ë¶„ì„í•˜ê³  ì´í•´", importance: 5 },
            { id: "c3_2", text: "ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥", importance: 4 },
            { id: "c3_3", text: "ê³ ê°ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ì „ê³¼ì œë¥¼ íŒŒì•…í•˜ëŠ” ëŠ¥ë ¥", importance: 4 },
            { id: "c3_4", text: "ì œí’ˆ ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì ìš©í•˜ì—¬ í•´ê²°ì±…ì„ ì œì‹œí•˜ëŠ” ëŠ¥ë ¥", importance: 4 },
          ]
        },
        {
          id: "d4",
          name: "4. ê³ ê° ê´€ê³„ êµ¬ì¶•",
          weight: 4,
          items: [
            { id: "c4_1", text: "ê³ ê°ê³¼ì˜ ê°•ë ¥í•œ ê´€ê³„ í˜•ì„±", importance: 5 },
            { id: "c4_2", text: "ì‹ ë¢°ì™€ ì‹ ë¢°ì„±ì„ êµ¬ì¶•í•˜ëŠ” ëŠ¥ë ¥", importance: 5 },
            { id: "c4_3", text: "ê³ ê°ì˜ ìš•êµ¬ì™€ í•„ìš”ë¥¼ ì´í•´í•˜ëŠ” ëŠ¥ë ¥", importance: 4 },
            { id: "c4_4", text: "ê³ ê°ê³¼ì˜ ì†Œí†µì„ í†µí•œ ê´€ê³„ ìœ ì§€", importance: 3 },
          ]
        },
        {
          id: "d5",
          name: "5. íŒë§¤ ì „ëµ ê°œë°œ",
          weight: 4,
          items: [
            { id: "c5_1", text: "ë¹„ì¦ˆë‹ˆìŠ¤ í™˜ê²½ê³¼ ì‚°ì—… ë™í–¥ì— ëŒ€í•œ ì´í•´", importance: 5 },
            { id: "c5_2", text: "ê³ ê°ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ê³¼ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ ì´í•´", importance: 4 },
            { id: "c5_3", text: "ì˜ì—… ì „ëµì„ ê°œë°œí•˜ê³  ì‹¤í–‰í•˜ëŠ” ëŠ¥ë ¥", importance: 5 },
            { id: "c5_4", text: "ê³ ê°ì´ ê°€ì¹˜ë¥¼ ì°½ì¶œí•  ìˆ˜ ìˆëŠ” ë°©ë²• ì œì‹œ", importance: 4 },
          ]
        }
    ];

    // --- App Logic ---

    const app = {
        state: {
            view: 'suitability',
            suitabilityScores: {},
            competencyScores: {}
        },

        init: function() {
            // Load data from LocalStorage
            try {
                const savedSuitability = localStorage.getItem('presales_suitability_scores');
                if (savedSuitability) this.state.suitabilityScores = JSON.parse(savedSuitability);

                const savedCompetency = localStorage.getItem('presales_competency_scores');
                if (savedCompetency) this.state.competencyScores = JSON.parse(savedCompetency);
            } catch (e) {
                console.error("Load failed", e);
            }

            // Render Initial Components
            this.renderSuitabilityChecklist();
            this.updateSuitabilityStats();
            
            this.renderCompetencyTable();
            this.updateCompetencyAnalysis();

            // Show default view
            this.navigate('suitability');
        },

        navigate: function(viewName) {
            this.state.view = viewName;
            
            // Update Sidebar UI
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`menu-${viewName}`).classList.add('active');

            // Update Main View UI
            document.getElementById('view-suitability').classList.add('hidden');
            document.getElementById('view-competency').classList.add('hidden');
            document.getElementById(`view-${viewName}`).classList.remove('hidden');
        },

        // --- Shared Slider Logic ---
        
        // Generates the HTML for a slider. 
        // type: 'suitability' or 'competency'
        generateSliderHTML: function(id, score, isSelected, type) {
            // Determine the onclick and oninput handlers based on type
            const changeHandler = type === 'suitability' 
                ? `app.setSuitabilityScore` 
                : `app.setCompetencyScore`;
            
            const handleInput = `app.handleSliderInput('${id}', this.value)`;
            
            // Layout Adjustments for Table context
            const containerStyle = type === 'competency' 
                ? 'width:100%; max-width:260px; margin:0 auto;' 
                : '';

            return `
                <div class="slider-container" style="${containerStyle}">
                    <div class="slider-header" id="header-${id}">
                        ${[1,2,3,4,5].map(n => 
                            `<div class="slider-num ${score === n ? 'active' : ''}" onclick="${changeHandler}('${id}', ${n})">${n}</div>`
                        ).join('')}
                    </div>
                    <div class="slider-track-wrapper">
                        <div class="track-bg"></div>
                        <div class="track-fill" id="fill-${id}" style="width: ${((score-1)/4)*100}%; opacity:${isSelected ? 1 : 0.3}"></div>
                        <input type="range" min="1" max="5" step="1" value="${score}" 
                               class="${isSelected ? 'selected' : ''}"
                               id="input-${id}"
                               oninput="${handleInput}"
                               onchange="${changeHandler}('${id}', parseInt(this.value))"
                               onpointerup="${changeHandler}('${id}', parseInt(this.value))"
                        >
                    </div>
                </div>
            `;
        },

        handleSliderInput: function(id, val) {
            const score = parseInt(val);
            const fillPercent = ((score - 1) / 4) * 100;
            
            const fillEl = document.getElementById(`fill-${id}`);
            const inputEl = document.getElementById(`input-${id}`);
            
            if(fillEl && inputEl) {
                fillEl.style.width = `${fillPercent}%`;
                fillEl.style.opacity = '1';
                inputEl.classList.add('selected');
            }
            
            // Update header numbers active state
            const header = document.getElementById(`header-${id}`);
            if(header) {
                Array.from(header.children).forEach((child, idx) => {
                    if (idx + 1 === score) child.classList.add('active');
                    else child.classList.remove('active');
                });
            }
        },

        // --- Suitability Logic ---

        renderSuitabilityChecklist: function() {
            const container = document.getElementById('checklist-container');
            let html = '';

            SUITABILITY_DATA.forEach(category => {
                html += `
                    <div class="card-premium category-card">
                        <h2 class="category-title">${category.title}</h2>
                        <div>
                `;
                
                category.items.forEach(item => {
                    const score = this.state.suitabilityScores[item.id] || 3;
                    const isSelected = this.state.suitabilityScores.hasOwnProperty(item.id);
                    
                    html += `
                        <div class="checklist-row">
                            <div style="flex:1; font-size:15px; font-weight:500; color:var(--text-secondary); line-height:1.5;">${item.text}</div>
                            ${this.generateSliderHTML(item.id, score, isSelected, 'suitability')}
                        </div>
                    `;
                });

                html += `</div></div>`;
            });

            container.innerHTML = html;
        },

        setSuitabilityScore: function(id, score) {
            this.state.suitabilityScores[id] = score;
            localStorage.setItem('presales_suitability_scores', JSON.stringify(this.state.suitabilityScores));
            
            // Sync Input if triggered by click on number or external call
            const input = document.getElementById(`input-${id}`);
            if(input) {
                input.value = score;
                this.handleSliderInput(id, score); // Update visuals
            }

            this.updateSuitabilityStats();
        },

        updateSuitabilityStats: function() {
            const totalItems = 11;
            const maxScore = totalItems * 5;
            const filledCount = Object.keys(this.state.suitabilityScores).length;
            
            const sum = Object.values(this.state.suitabilityScores).reduce((a,b) => a+b, 0);
            const finalScore = Math.round((sum / maxScore) * 100);
            const progressPercent = Math.round((filledCount / totalItems) * 100);

            // DOM Updates
            document.getElementById('suitability-total-score').innerText = finalScore;
            document.getElementById('suitability-progress-text').innerText = `ì§„í–‰ë¥  (${filledCount}/${totalItems})`;
            document.getElementById('suitability-progress-percent').innerText = `${progressPercent}%`;
            document.getElementById('suitability-progress-bar').style.width = `${progressPercent}%`;

            // Show Result if complete
            const resultEl = document.getElementById('suitability-result');
            const resultTextEl = document.getElementById('suitability-result-text');
            
            if (filledCount === totalItems) {
                resultEl.classList.remove('hidden');
                if (finalScore >= 80) {
                    resultTextEl.innerText = "í”„ë¦¬ì„¸ì¼ì¦ˆ ì§ë¬´ì— ë§¤ìš° ì í•©í•œ ì„±í–¥ê³¼ ì—­ëŸ‰ì„ ê°–ì¶”ê³  ê³„ì‹­ë‹ˆë‹¤! íƒì›”í•œ ì„±ê³¼ê°€ ê¸°ëŒ€ë©ë‹ˆë‹¤.";
                } else if (finalScore >= 60) {
                    resultTextEl.innerText = "í”„ë¦¬ì„¸ì¼ì¦ˆ ì§ë¬´ì— ëŒ€í•œ ì ì¬ë ¥ì´ ì¶©ë¶„í•©ë‹ˆë‹¤. ì¼ë¶€ ì—­ëŸ‰ì„ ë³´ì™„í•˜ë©´ í›Œë¥­í•œ ì „ë¬¸ê°€ë¡œ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                } else {
                    resultTextEl.innerText = "í˜„ì¬ ì„±í–¥ê³¼ëŠ” ë‹¤ì†Œ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬ì²´ì ì¸ ë¶€ì¡± ì—­ëŸ‰ì„ íŒŒì•…í•˜ê³  ê°œë°œ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.";
                }
            } else {
                resultEl.classList.add('hidden');
            }
        },

        resetSuitability: function() {
            if(confirm("ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                this.state.suitabilityScores = {};
                localStorage.removeItem('presales_suitability_scores');
                this.renderSuitabilityChecklist();
                this.updateSuitabilityStats();
            }
        },

        // --- Competency Logic ---

        renderCompetencyTable: function() {
            const tbody = document.getElementById('competency-table-body');
            let html = '';

            COMPETENCY_DATA.forEach(domain => {
                domain.items.forEach((item, idx) => {
                    const currentScore = this.state.competencyScores[item.id] || 3;
                    const isSelected = this.state.competencyScores.hasOwnProperty(item.id);
                    const gap = this.state.competencyScores[item.id] ? (domain.weight * item.importance * (item.importance - currentScore)) : null;
                    
                    html += `<tr>`;
                    
                    // Domain Cell (Rowspan)
                    if (idx === 0) {
                        html += `
                            <td rowspan="${domain.items.length}" class="domain-cell">
                                <div style="font-weight:700; color:var(--text-main); margin-bottom:8px;">${domain.name}</div>
                                <span class="badge-weight">ê°€ì¤‘ì¹˜ ${domain.weight}</span>
                            </td>
                        `;
                    }

                    html += `
                        <td>${item.text}</td>
                        <td class="text-center">
                            <span style="display:inline-block; width:8px; height:8px; background:var(--primary); border-radius:50%; margin-right:6px; opacity:${item.importance/5}"></span>
                            ${item.importance}
                        </td>
                        <td class="text-center">
                            ${this.generateSliderHTML(item.id, currentScore, isSelected, 'competency')}
                        </td>
                        <td class="text-center">
                            ${gap !== null ? `<span class="gap-badge ${gap > 0 ? 'gap-high' : 'gap-low'}">${gap.toFixed(0)}</span>` : '-'}
                        </td>
                    `;

                    html += `</tr>`;
                });
            });

            tbody.innerHTML = html;
        },

        setCompetencyScore: function(id, score) {
            this.state.competencyScores[id] = score;
            localStorage.setItem('presales_competency_scores', JSON.stringify(this.state.competencyScores));
            
             // Sync Input if triggered by click on number or external call
            const input = document.getElementById(`input-${id}`);
            if(input) {
                input.value = score;
                this.handleSliderInput(id, score); // Update visuals
            }
            
            // Update Stats
            this.updateCompetencyAnalysis();
            
            // Update GAP cell for this row specifically
            this.updateGapCell(id, score);
        },
        
        updateGapCell: function(itemId, score) {
            // Find domain and item to calc gap
            let domain, item;
            for(const d of COMPETENCY_DATA) {
                const i = d.items.find(it => it.id === itemId);
                if(i) { domain = d; item = i; break; }
            }
            
            if(domain && item) {
                const gap = domain.weight * item.importance * (item.importance - score);
                // Find the row. It's the parent TR of the input
                const inputEl = document.getElementById(`input-${itemId}`);
                if(inputEl) {
                    const tr = inputEl.closest('tr');
                    const gapCell = tr.lastElementChild;
                    gapCell.innerHTML = `<span class="gap-badge ${gap > 0 ? 'gap-high' : 'gap-low'}">${gap.toFixed(0)}</span>`;
                }
            }
        },

        updateCompetencyAnalysis: function() {
            const priorities = [];
            let hasData = false;

            COMPETENCY_DATA.forEach(domain => {
                domain.items.forEach(item => {
                    const current = this.state.competencyScores[item.id];
                    if (current) {
                        hasData = true;
                        const gap = domain.weight * item.importance * (item.importance - current);
                        if (gap > 0) {
                            priorities.push({
                                domain: domain.name,
                                text: item.text,
                                gap: gap
                            });
                        }
                    }
                });
            });

            // Sort by GAP desc
            priorities.sort((a,b) => b.gap - a.gap);
            const top3 = priorities.slice(0, 3);

            const prioritySection = document.getElementById('priority-section');
            const listContainer = document.getElementById('priority-list');

            if (top3.length > 0) {
                prioritySection.classList.remove('hidden');
                listContainer.innerHTML = top3.map((p, idx) => `
                    <div class="card-premium priority-card">
                        <div class="rank-badge">${idx+1}</div>
                        <div style="font-size:11px; text-transform:uppercase; font-weight:700; color:var(--text-muted); margin-bottom:8px;">${p.domain}</div>
                        <div style="font-size:16px; font-weight:600; margin-bottom:16px; min-height:44px;">${p.text}</div>
                        <div style="background:#F9FAFB; padding:8px 12px; border-radius:8px; display:flex; justify-content:space-between; font-size:13px;">
                            <span style="color:var(--text-secondary)">GAP Score</span>
                            <strong style="color:var(--primary)">${p.gap.toFixed(1)}</strong>
                        </div>
                    </div>
                `).join('');
            } else {
                prioritySection.classList.add('hidden');
            }
        },

        resetCompetency: function() {
            if(confirm("ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                this.state.competencyScores = {};
                localStorage.removeItem('presales_competency_scores');
                this.renderCompetencyTable();
                this.updateCompetencyAnalysis();
            }
        }
    };

    // Start App
    document.addEventListener('DOMContentLoaded', () => {
        app.init();
    });
    </script>
</body>
</html>